<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>Image</title>
		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link rel="stylesheet" href="${request.contextPath}/static/assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="${request.contextPath}/static/assets/font-awesome/4.2.0/css/font-awesome.min.css" />
		<!-- page specific plugin styles -->
		<link rel="stylesheet" href="${request.contextPath}/static/assets/css/jquery-ui.custom.min.css" />
		<link rel="stylesheet" href="${request.contextPath}/static/assets/css/jquery.gritter.min.css" />
		<!-- text fonts -->
		<link rel="stylesheet" href="${request.contextPath}/static/assets/fonts/fonts.googleapis.com.css" />
		<!-- BootstrapValidator -->
		<link rel="stylesheet" href="${request.contextPath}/static/assets/css/bootstrapValidator.min.css" />

		<link rel="stylesheet" href="${request.contextPath}/static/assets/css/fileinput.min.css" />
		<!-- ace styles -->
		<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
		<!-- ace settings handler -->
		<script src="${request.contextPath}/static/assets/js/ace-extra.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/jquery.2.1.1.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/bootstrap.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/jquery-ui.custom.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/jquery.ui.touch-punch.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/bootbox.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/jquery.gritter.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/spin.min.js"></script>
		<!-- ace scripts -->
		<script src="${request.contextPath}/static/assets/js/ace-elements.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/ace.min.js"></script>
		<!-- validator scripts -->
		<script src="${request.contextPath}/static/assets/js/bootstrapValidator.min.js"></script>
		<!-- user scripts -->
		<script src="${request.contextPath}/static/assets/js/user/base.js"></script>
		<script src="${request.contextPath}/static/assets/js/fileinput.min.js"></script>
		<script src="${request.contextPath}/static/assets/js/locales/zh.js"></script>
	</head>

	<body class="no-skin" style="background-color: #FFF;">
		<div class="page-content">
			<div class="page-header">
				<h1>
					新增
				</h1>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<form id="platformForm" class="form-horizontal" role="form">
						<input type="hidden" id="_csrf" name="${_csrf.parameterName}" value="${_csrf.token}"/>

						<div class="form-group">
							<label class="col-sm-3 control-label no-padding-right" > 订单号 </label>
							<div class="col-sm-9">
								<input type="text" id="trade_id" name="trade_id" placeholder="trade_id" value="${image.trade_id!}" class="col-xs-10 col-sm-5">
							</div>
						</div>
						<div class="space-2"></div>
						<div class="form-group">
							<label class="col-sm-3 control-label no-padding-right" > 客户身份证照片 </label>
							<div class="col-sm-9">
								<input id="cust_img" name="cust_img" type="file" class="projectfile" data-show-upload="false"/>
							</div>
						</div>

						<div class="space-2"></div>
						<div class="form-group">
							<label class="col-sm-3 control-label no-padding-right" > 使用人身份证照片 </label>
							<div class="col-sm-9">
								<input id="use_img" name="use_img" type="file" class="projectfile" data-show-upload="false"/>
							</div>
						</div>
						<div class="space-2"></div>
						<div class="form-group">
							<label class="col-sm-3 control-label no-padding-right" > 经办人身份证照片 </label>
							<div class="col-sm-9">
								<input id="deal_img" name="deal_img" type="file" class="projectfile" data-show-upload="false"/>
							</div>
						</div>
						<div class="space-2"></div>
						<div class="form-group">
							<label class="col-sm-3 control-label no-padding-right" > 经办人头像照片 </label>
							<div class="col-sm-9">
								<input id="deal_head_img" name="deal_head_img" type="file" class="projectfile" />
							</div>
						</div>

						<div class="clearfix form-actions">
							<div class="col-md-offset-4 col-md-8">
								<button id="submitBtn" class="btn btn-info" type="button">
									<i class="ace-icon fa fa-check bigger-110"></i>
									保存
								</button>
							</div>
						</div>

					</form>
				</div><!-- /.col -->
			</div><!-- /.row -->
		</div>


		<!-- inline scripts related to this page -->
		<script type="text/javascript">

			$(function ()
			{
				imageFileInput("cust_img","/SongshanManagement/animalcontent/addfishPicture.html");
			});

			//初始化鱼类名录信息上传的fileinput控件
			function imageFileInput(ctrlName, uploadUrl)
			{
				$("#"+ctrlName).fileinput({
					language: 'zh', //设置语言
					uploadUrl: uploadUrl, //上传的地址
					enctype: 'multipart/form-data',
					allowedFileExtensions : ['jpg', 'png','bmp','jpeg'],//接收的文件后缀
					showUpload: false, //是否显示上传按钮
					showPreview: true,              //展前预览
					showCaption: false,//是否显示标题
					maxFileSize : 10000,//上传文件最大的尺寸
					maxFilesNum : 10,//
					dropZoneEnabled: false,//是否显示拖拽区域
					browseClass: "btn btn-primary", //按钮样式
					uploadAsync: false,
					layoutTemplates :{
						 actionDelete:'true', //去除上传预览的缩略图中的删除图标
						 actionUpload:'true',//去除上传预览缩略图中的上传图片；
						 actionZoom:'true'   //去除上传预览缩略图中的查看详情预览的缩略图标。
					}
				}).on("filebatchuploadsuccess", function(event, data) {
					if(data.response){
						<!--closeModal('fishAddDetail') 关闭模态框。-->
						<!--$("#bootstraptable_fishcontent").bootstrapTable("refresh");-->
					}
				}).on('fileerror', function(event, data, msg) {  //一个文件上传失败
					console.log('文件上传失败！'+msg);
				});
			}

			function imageClick (var type) {
				var picturename="";//获取上传的文件的后缀名，如果不是jpg,或者png的话不出发上传，弹出提示，表单里面的其他内容也不上传。
				$.ajax(
				{
						type: 'post',
						url: '/SongshanManagement/animalcontent/addfishcontent.html',
						data: $("#form_addfishContent").serialize(),
						success: function (data) {
							fishId = data;
							//不上传图片时，不触发bootstrap 上传插件的初始化方法。仅将表单里面的（除图片以外的）内容提交，
							if ($("#fish_file").val() != "") {
								$('#fish_file').fileinput('upload'); //触发插件开始上传。
							}
							else {
								closeModal('fishAddDetail');
								$("#bootstraptable_fishcontent").bootstrapTable("refresh");
							}

						}
				});

			});
		</script>
	</body>
</html>